{% extends "layout.html" %}

{% block title %} Posts {% endblock %}

{% block content %}
  <div class="pagetitle">
    <h1>Users</h1>
    <nav>
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{{ url_for('users') }}">Users</a></li>
      </ol>
    </nav>
  </div>
  <section class="section">
    <div class="row">
      <div class="card">
        <div class="card-body">
          <div class="row">
            <div class="col mt-3">
              <div class="col-auto" >
                <a class="btn btn-primary btn-sm" href="{{url_for('new_user')}}" style="float: right;">
                  <i class="ri-add-circle-fill"></i> New User
                </a>
              </div>
            </div>          
          </div>
          <div class="mb-0">
            <table class="table table-hover my-0">
              <thead>
                <tr>
                	<th>Name</th>
                  	<th>Username</th>
	                <th class="d-none d-xl-table-cell">Email</th>
	                <th class="d-none d-xl-table-cell">Roles</th>
	                
	                <th class="d-none d-md-table-cell">Actions</th>
                </tr>
              </thead>
              <tbody>
                {% for user in users %}
                 <tr>
                 	<td>{{ user.first_name }} {{ user.last_name}}</td>
                  <td>{{ user.username }}</td>
                  <td class="d-none d-xl-table-cell">{{ user.email }}</a></td>
                  <td class="d-none d-xl-table-cell"> {{ user.roles | length }} Roles </td>
                  
                  <td>                  
                      <div class="btn-group">
                        <button type="button" class="btn btn-outline-primary btn-sm dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                          Action
                        </button>
                        <ul class="dropdown-menu">
                          <li><a class="dropdown-item" href="{{ url_for('profile_view', id=user.id)}}">Preview</a></li>                        
                          <li><hr class="dropdown-divider"></li>
                          <li><a class="dropdown-item" href="{{ url_for('edit_user', id=user.id)}}">Edit</a></li>
                          <li><a class="dropdown-item" href="{{ url_for('change_password_user', id=user.id)}}">Change Password</a></li>
                          <li><a class="dropdown-item" href="{{ url_for('del_user', id=user.id)}}" onclick="return confirm('Are You Sure To Delete ?')">Delete</a></li>
                        </ul>
                      </div>
                  </td>
                 </tr>
               
                 {% endfor %}

              </tbody>
            </table>
          </div>
        </div>
      </div>        
    </div>
  </section>


{% endblock %}

